<% if probes.empty? %>
  <div class="no-data-message">
    No probe data available for the selected type.
  </div>
<% else %>
  <div class="probe-status-wrapper">
    <table class="probe-status-table">
      <thead>
        <tr>
          <th class="probe-status-probe-header">Probe</th>
          <% sites.each do |site| %>
            <th class="probe-status-site-header"><%= site.city %></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% probes.each do |probe| %>
          <tr class="<%= "probe-status-row--down" if probe.any_down? %>">
            <td class="probe-status-probe">
              <%= probe_type_icon(probe.type) %>
              <span><%= probe.name %></span>
            </td>
            <% sites.each do |site| %>
              <% status = probe.status_for_site(site.code) %>
              <td class="probe-status-cell <%= probe_status_css_class(status) %>">
                <% if status.nil? %>
                  <span class="probe-status-indicator probe-status-indicator--unknown">â€”</span>
                <% elsif status.stale? %>
                  <span class="probe-status-indicator probe-status-indicator--stale">STALE</span>
                <% elsif status.up? %>
                  <span class="probe-status-indicator probe-status-indicator--up">UP</span>
                <% else %>
                  <span class="probe-status-indicator probe-status-indicator--down">DOWN</span>
                  <% if status.down_since %>
                    <span class="probe-status-down-since"><%= time_ago_in_words(status.down_since) %> ago</span>
                  <% end %>
                <% end %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% end %>
