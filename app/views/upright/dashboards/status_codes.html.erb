<div class="dashboard status-codes-dashboard"
     data-controller="status-codes-dashboard"
     data-status-codes-dashboard-prometheus-url-value="<%= upright.prometheus_path(subdomain: Upright.configuration.admin_subdomain) %>"
     data-action="time-picker:change@window->status-codes-dashboard#onTimeChange">

  <header class="dashboard-header">
    <h1>HTTP Status Codes</h1>
    <%= render "time_picker" %>
  </header>

  <div class="dashboard-filters">
    <label for="site-filter">Site</label>
    <select id="site-filter"
            class="input--select"
            data-status-codes-dashboard-target="siteFilter"
            data-action="change->status-codes-dashboard#onFilterChange">
      <option value="">All Sites</option>
      <% @sites.each do |site| %>
        <option value="<%= site.code %>"><%= site.city %></option>
      <% end %>
    </select>

    <label for="probe-filter">Probe</label>
    <select id="probe-filter"
            class="input--select"
            data-status-codes-dashboard-target="probeFilter"
            data-action="change->status-codes-dashboard#onFilterChange">
      <option value="">All Probes</option>
      <% @http_probe_names.each do |name| %>
        <option value="<%= name %>"><%= name %></option>
      <% end %>
    </select>
  </div>

  <div class="dashboard-loading hidden" data-status-codes-dashboard-target="loading">
    <span class="loading-spinner"></span>
    <span>Loading...</span>
  </div>

  <section class="dashboard-section">
    <h2>Status Code Heatmap</h2>
    <div class="dashboard-heatmap" data-status-codes-dashboard-target="heatmap">
      <div class="no-data-message">Loading...</div>
    </div>
  </section>

  <section class="dashboard-section">
    <div class="dashboard-error-list" data-status-codes-dashboard-target="errorList"></div>
  </section>
</div>
